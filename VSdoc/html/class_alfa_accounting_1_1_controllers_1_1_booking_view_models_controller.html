<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: AlfaAccounting.Controllers.BookingViewModelsController Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_alfa_accounting.html">AlfaAccounting</a></li><li class="navelem"><a class="el" href="namespace_alfa_accounting_1_1_controllers.html">Controllers</a></li><li class="navelem"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html">BookingViewModelsController</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-attribs">Public Attributes</a> &#124;
<a href="#pub-static-attribs">Static Public Attributes</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#properties">Properties</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">AlfaAccounting.Controllers.BookingViewModelsController Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p> 
 <a href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#details">More...</a></p>

<p>Inherits Controller.</p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a5264795f04c49fa720e00514b644b57d"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a5264795f04c49fa720e00514b644b57d">Dashboard</a> (int? year)</td></tr>
<tr class="memdesc:a5264795f04c49fa720e00514b644b57d"><td class="mdescLeft">&#160;</td><td class="mdescRight">with user specified year parameter, calcuates and displays the graph data also calucate and display user visits notification, admin visit notification and visit status update notification  <a href="#a5264795f04c49fa720e00514b644b57d">More...</a><br /></td></tr>
<tr class="separator:a5264795f04c49fa720e00514b644b57d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a560b40cc15d83dc780c485d678e3e68c"><td class="memItemLeft" align="right" valign="top">async Task&lt; ActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a560b40cc15d83dc780c485d678e3e68c">SendAdminTodaysVisitText</a> ()</td></tr>
<tr class="memdesc:a560b40cc15d83dc780c485d678e3e68c"><td class="mdescLeft">&#160;</td><td class="mdescRight">On Click Ation to send todays visit's users detail  <a href="#a560b40cc15d83dc780c485d678e3e68c">More...</a><br /></td></tr>
<tr class="separator:a560b40cc15d83dc780c485d678e3e68c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab2da8319a9b49c4dd060b669e230552"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#aab2da8319a9b49c4dd060b669e230552">DashBoardUser</a> ()</td></tr>
<tr class="memdesc:aab2da8319a9b49c4dd060b669e230552"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate and display count of invoice and total amount of unpaid invoice sum  <a href="#aab2da8319a9b49c4dd060b669e230552">More...</a><br /></td></tr>
<tr class="separator:aab2da8319a9b49c4dd060b669e230552"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fa97ecedb9b4faaec9e994bfce18eb3"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a1fa97ecedb9b4faaec9e994bfce18eb3">BookDates</a> ()</td></tr>
<tr class="memdesc:a1fa97ecedb9b4faaec9e994bfce18eb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a BookDates View that displays calender makde of java script  <a href="#a1fa97ecedb9b4faaec9e994bfce18eb3">More...</a><br /></td></tr>
<tr class="separator:a1fa97ecedb9b4faaec9e994bfce18eb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c17315b4daf73640327bfefa8b34ad7"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a5c17315b4daf73640327bfefa8b34ad7">AddBooking</a> ()</td></tr>
<tr class="memdesc:a5c17315b4daf73640327bfefa8b34ad7"><td class="mdescLeft">&#160;</td><td class="mdescRight">opens empty booking start end date input view.  <a href="#a5c17315b4daf73640327bfefa8b34ad7">More...</a><br /></td></tr>
<tr class="separator:a5c17315b4daf73640327bfefa8b34ad7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26b7e355b83aa0974f8b3a42c3096924"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a26b7e355b83aa0974f8b3a42c3096924">AddBooking</a> (AddBookingViewModel model)</td></tr>
<tr class="memdesc:a26b7e355b83aa0974f8b3a42c3096924"><td class="mdescLeft">&#160;</td><td class="mdescRight">post the input value and if successful save it to the database return user back to BookDates if unsuccessful returns current AddBooking view with posted data and error message  <a href="#a26b7e355b83aa0974f8b3a42c3096924">More...</a><br /></td></tr>
<tr class="separator:a26b7e355b83aa0974f8b3a42c3096924"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27f68c32481b86742af2ecc237d8ec65"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a27f68c32481b86742af2ecc237d8ec65">ConfirmBooking</a> ()</td></tr>
<tr class="memdesc:a27f68c32481b86742af2ecc237d8ec65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create model using bookings in side booking cart saves the data inside of NewInvoice Session  <a href="#a27f68c32481b86742af2ecc237d8ec65">More...</a><br /></td></tr>
<tr class="separator:a27f68c32481b86742af2ecc237d8ec65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3cf39dd1c42f4d3277be49ee71bda48"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#aa3cf39dd1c42f4d3277be49ee71bda48">ConfirmVisit</a> (int? id)</td></tr>
<tr class="memdesc:aa3cf39dd1c42f4d3277be49ee71bda48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get booking using the passed id saves it as a tempdata BookingOriginal Get invoice using the BookingId of the booking saves it as a tempdata InvoiceOriginal retrn it to the view  <a href="#aa3cf39dd1c42f4d3277be49ee71bda48">More...</a><br /></td></tr>
<tr class="separator:aa3cf39dd1c42f4d3277be49ee71bda48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30ebb6edf4dab2b9d02a3fbac9570bae"><td class="memItemLeft" align="right" valign="top">async Task&lt; ActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a30ebb6edf4dab2b9d02a3fbac9570bae">ConfirmVisit</a> ([Bind(Include=&quot;BookingId,BookedDate,BookingStartDateTime,BookingEndDateTime,BookingStatus,BookingAdjustmentHrs,ItemDescription,Subtotal,BookingDeposit,BookingCancellationFee,UnitPriceId,Id,InvoiceId&quot;)] Booking booking)</td></tr>
<tr class="memdesc:a30ebb6edf4dab2b9d02a3fbac9570bae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get posted booking data,depending on the booking status chosen manipulate data and redirect to apprprirate view if booking status is unchanged or curtailed/extended without adjustment hrs input returns current view with error if booking status is visited, startDate, endDate, and item description updated and the booking saved to database Returns AdminBooking View if booking status is extended, subtotal, deposit cancellationfee value, startDate, endDate, and item description  <a href="#a30ebb6edf4dab2b9d02a3fbac9570bae">More...</a><br /></td></tr>
<tr class="separator:a30ebb6edf4dab2b9d02a3fbac9570bae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e2390ab528b31f0e6f08cb2e1e3b4d6"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a0e2390ab528b31f0e6f08cb2e1e3b4d6">AmendBookDates</a> (int? id)</td></tr>
<tr class="memdesc:a0e2390ab528b31f0e6f08cb2e1e3b4d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find Booking matches with the passed Id, Create model of a booking that both start end date is in string to work with jquery ui Find Invoice of the found Booking Pass the model to return the view  <a href="#a0e2390ab528b31f0e6f08cb2e1e3b4d6">More...</a><br /></td></tr>
<tr class="separator:a0e2390ab528b31f0e6f08cb2e1e3b4d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7f71cbbf29ebdd1103368248f4f70f8"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#ac7f71cbbf29ebdd1103368248f4f70f8">AmendBookDates</a> ([Bind(Include=&quot;BookingId,BookedDate,BookingStartDateTime,BookingEndDateTime,UnitPriceId,Id,InvoiceId&quot;)] AmendBookDatesDateFilterModel model)</td></tr>
<tr class="memdesc:ac7f71cbbf29ebdd1103368248f4f70f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find Booking using BookingId passed BookingOriginal TempData and assign original data to binding local variable booking Find Invoice using Invoiceid from Invoice Original TempData and assing original data to local variable selectedInv Calcuate duration of original and updated booking if both duration is the same, startDate, endDate, Item Description, subtotal, of the booking save as BookingUpdated TempData if Original duration is less than increase booking duration, updates startDate, endDate, Item Description, subtotal, of the booking also selectedInv's Recievable deposit amount get increased that get saved as InvoiceUpdated. that get passed to AmendBookingconfirmed view if Original duration is more than updated booking duration, updates the startDate, endDate, Item Description, subtotal, of the booking that get saved as BookingUpdated also selectedInv's Recievable deposit amount get reduced that get saved as InvoiceUpdated. then BookingOriginal, InvoiceOriginal, BookingUpdated, InvoiceUpdated get passed to AddBookingConfirmation View if not successful it returns the current view  <a href="#ac7f71cbbf29ebdd1103368248f4f70f8">More...</a><br /></td></tr>
<tr class="separator:ac7f71cbbf29ebdd1103368248f4f70f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb2e1c7475bb061d45f7a810f5420d75"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#afb2e1c7475bb061d45f7a810f5420d75">AmendBookingConfirmation</a> ()</td></tr>
<tr class="memdesc:afb2e1c7475bb061d45f7a810f5420d75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create VisitRefundViewModel model using data passed from tempdata BookingOriginal, BookingUpudated, Invoice Original, Invoice Updated that get passed to amend booking confirmation view  <a href="#afb2e1c7475bb061d45f7a810f5420d75">More...</a><br /></td></tr>
<tr class="separator:afb2e1c7475bb061d45f7a810f5420d75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6e5358b2fd882c060e26353c85658d87"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a6e5358b2fd882c060e26353c85658d87">AmendBookingConfirmation</a> (bool answer)</td></tr>
<tr class="memdesc:a6e5358b2fd882c060e26353c85658d87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Only when additional payment amount is 0, and confirm button is clicked boolean value get passed to this action updates corresponding booking records in database  <a href="#a6e5358b2fd882c060e26353c85658d87">More...</a><br /></td></tr>
<tr class="separator:a6e5358b2fd882c060e26353c85658d87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34296cd23c09ae737da8519afeb608ab"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a34296cd23c09ae737da8519afeb608ab">CancelBooking</a> (int? id)</td></tr>
<tr class="memdesc:a34296cd23c09ae737da8519afeb608ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">careates MyBookingCancellation model using the routed booking id by finding it from the database if BookingStartDateTime is less than 48 hrs from now, add Â£25 of cancellation fee to the model, Saves the model as MyBookingCancellationRequest session and if cancellation fee is more than paid deposit that session is used to pass the charge fee. that model get passed to cancel booking view  <a href="#a34296cd23c09ae737da8519afeb608ab">More...</a><br /></td></tr>
<tr class="separator:a34296cd23c09ae737da8519afeb608ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5344a979e68c8b3714902ad3bc2f98c"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#ae5344a979e68c8b3714902ad3bc2f98c">New</a> ()</td></tr>
<tr class="memdesc:ae5344a979e68c8b3714902ad3bc2f98c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get client token to access braintree gateway, if newInvoice session data is not null, pass pay newInvoiceSeccion's recievable deposit amount as pay amount to pay newly booked deposit if MyBookingCancellationRequest session data is not null, if cancellation fee is more than 0 and paymentType is Deposit or DepositCancelled, pay amount is booking cancellation fee to pay cancelation fee. if booking cancellation fee is more than 0, cancellation fee is more than Booking deposit, deposit becomes pay amount to pay cancelation fee. if booking status is cancelled but booking deposit is more than 0, refund amount is original cancelled deposit amount to refund deposit. ** only in this case return New view with Get Refund Post form. if tempInvoiceDetail is not null pay amount becomes tempInvoiceDetail.receibableRemainingAmount - tempInvoiceDetail.PayableAmount to pay remaining booking fee and saves tempInvoiceDatail as TempData if invoiceUpdated or bookingUpdated is not null, amount becomes posted amount from the AmendBookingConfirmation for user to pay extra hrs deposit charge  <a href="#ae5344a979e68c8b3714902ad3bc2f98c">More...</a><br /></td></tr>
<tr class="separator:ae5344a979e68c8b3714902ad3bc2f98c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6aab0900b3c5209a8674b3b909d7532b"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a6aab0900b3c5209a8674b3b909d7532b">Create</a> ()</td></tr>
<tr class="memdesc:a6aab0900b3c5209a8674b3b909d7532b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open Gateway to the Braintree and make payment of the passed amount and submit for the settlement when successful and if NewInvoice Session data is not null saves the new booking to the Boooking Invoice, Payemnt and Payment History databases and clear shopping cart item. if tempInvoiceDetailVeiwmodel TempData is not null saves the remainging payment amount related update to the Invoice, Booking, Payemnt and Payment History databases if MyBookingCancelationRequrest Session data is not null, cancelation related payment amount updated on booking, invoice, payment and paymentHisotry database if BookingUpdated and InvoiceUpdated TempData that is from amdend booking acion is not null, appropriate extra depsit charge or cancellation fee or reduced hrs deposit refund related change get amended to Booking, invoice, payemt and paymenthistory database.  <a href="#a6aab0900b3c5209a8674b3b909d7532b">More...</a><br /></td></tr>
<tr class="separator:a6aab0900b3c5209a8674b3b909d7532b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3606d7cc1ee17ff8da3baaf866ea68b"><td class="memItemLeft" align="right" valign="top">async Task&lt; ActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#aa3606d7cc1ee17ff8da3baaf866ea68b">Show</a> (String id)</td></tr>
<tr class="memdesc:aa3606d7cc1ee17ff8da3baaf866ea68b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the transaction id and find transaction status info and displays Calls for the payment confirmation email function before return view  <a href="#aa3606d7cc1ee17ff8da3baaf866ea68b">More...</a><br /></td></tr>
<tr class="separator:aa3606d7cc1ee17ff8da3baaf866ea68b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf4a14a9683e52f9dff922c5e58bc125"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#adf4a14a9683e52f9dff922c5e58bc125">AdminBooking</a> (string startDate, string endDate)</td></tr>
<tr class="memdesc:adf4a14a9683e52f9dff922c5e58bc125"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allows admin view all the current bookings. allows fileter the booking data between start and endDate paramenter  <a href="#adf4a14a9683e52f9dff922c5e58bc125">More...</a><br /></td></tr>
<tr class="separator:adf4a14a9683e52f9dff922c5e58bc125"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c4f4b56be6badae27c572180cb3d8fd"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a2c4f4b56be6badae27c572180cb3d8fd">SendApptConfirmation</a> ()</td></tr>
<tr class="memdesc:a2c4f4b56be6badae27c572180cb3d8fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get BookingStateDateTime is less tha 24hrs from now. and pass that list to the View  <a href="#a2c4f4b56be6badae27c572180cb3d8fd">More...</a><br /></td></tr>
<tr class="separator:a2c4f4b56be6badae27c572180cb3d8fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a047e63d34c2b64f178b55351fa544e77"><td class="memItemLeft" align="right" valign="top">async Task&lt; ActionResult &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a047e63d34c2b64f178b55351fa544e77">SendApptConfirmationText</a> ()</td></tr>
<tr class="memdesc:a047e63d34c2b64f178b55351fa544e77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get BookingStateDateTime is less tha 24hrs from now and send confirmation text to all users  <a href="#a047e63d34c2b64f178b55351fa544e77">More...</a><br /></td></tr>
<tr class="separator:a047e63d34c2b64f178b55351fa544e77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a361d39aedee7dbfdacfaae1c1a9c67cc"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a361d39aedee7dbfdacfaae1c1a9c67cc">MyBooking</a> (string startDate, string endDate)</td></tr>
<tr class="memdesc:a361d39aedee7dbfdacfaae1c1a9c67cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Bookings and create query with Invoice and payment amount and set those data in to MyBookingsViewModelBase model list if startDate and endDate parameter passed, allows user fileter the data by BookingStartDateTime allows user export in csv, in pdf of the filtered or unfiletered data  <a href="#a361d39aedee7dbfdacfaae1c1a9c67cc">More...</a><br /></td></tr>
<tr class="separator:a361d39aedee7dbfdacfaae1c1a9c67cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a346f77626590a070d12e96a5d69a837e"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a346f77626590a070d12e96a5d69a837e">InvoiceIndex</a> (string startDate, string endDate)</td></tr>
<tr class="memdesc:a346f77626590a070d12e96a5d69a837e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the list of Bookings with Invoice and payment amount by user id if user is logged in, if admin/staff is logged in all user's invoice data get returned and set those data in to InvoiceIndexViewModel model list if startDate and endDate parameter passed, allows user fileter the model data by BookingStartDateTime allows user export in csv, in pdf of the filtered or unfiletered model data  <a href="#a346f77626590a070d12e96a5d69a837e">More...</a><br /></td></tr>
<tr class="separator:a346f77626590a070d12e96a5d69a837e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a041402af1bece6737df3fb799dc16550"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a041402af1bece6737df3fb799dc16550">InvoiceDetail</a> (int? id)</td></tr>
<tr class="memdesc:a041402af1bece6737df3fb799dc16550"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets Invoice Detail data using the passed id and returns it to the view  <a href="#a041402af1bece6737df3fb799dc16550">More...</a><br /></td></tr>
<tr class="separator:a041402af1bece6737df3fb799dc16550"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af36acd06396149c082418a6668673052"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#af36acd06396149c082418a6668673052">InvoiceDetailToPDF</a> ()</td></tr>
<tr class="memdesc:af36acd06396149c082418a6668673052"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert passed model into a pdf view  <a href="#af36acd06396149c082418a6668673052">More...</a><br /></td></tr>
<tr class="separator:af36acd06396149c082418a6668673052"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ed146c62729d4e05b0bc7b532319ed8"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a0ed146c62729d4e05b0bc7b532319ed8">PaymentIndex</a> (string startDate, string endDate)</td></tr>
<tr class="memdesc:a0ed146c62729d4e05b0bc7b532319ed8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the Bookings and create query with invoice and payment amount by user id if user is logged in, if admin/staff is logged in all user's payment query data get returned and set above data into PaymentReceiptViewModel model list if startDate and endDate parameter passed, allows user fileter the data by the BookingStartDateTime allows user export in csv, in pdf of the filtered or unfiletered data  <a href="#a0ed146c62729d4e05b0bc7b532319ed8">More...</a><br /></td></tr>
<tr class="separator:a0ed146c62729d4e05b0bc7b532319ed8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac228b95707fb10fe6aca1e4cacc2be6d"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#ac228b95707fb10fe6aca1e4cacc2be6d">PaymentReceipt</a> (int? id)</td></tr>
<tr class="memdesc:ac228b95707fb10fe6aca1e4cacc2be6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Invoice record found by the passed id and create query with payemnt and Invoice data set PaymentReceiptViewModel model with the query data  <a href="#ac228b95707fb10fe6aca1e4cacc2be6d">More...</a><br /></td></tr>
<tr class="separator:ac228b95707fb10fe6aca1e4cacc2be6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af89a68f628793df0d1b8b3167686b33e"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#af89a68f628793df0d1b8b3167686b33e">PaymentReceiptToPDF</a> (int? id)</td></tr>
<tr class="memdesc:af89a68f628793df0d1b8b3167686b33e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate total credit, debt and paid from the data passed APaymentReceipt as PaymentReceiptViewModel and pass this model data to the PaymentReceiptToPDFView  <a href="#af89a68f628793df0d1b8b3167686b33e">More...</a><br /></td></tr>
<tr class="separator:af89a68f628793df0d1b8b3167686b33e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe5d4ebb87b5c0e91f2617edd686509d"><td class="memItemLeft" align="right" valign="top"><a id="abe5d4ebb87b5c0e91f2617edd686509d"></a>
ActionResult&#160;</td><td class="memItemRight" valign="bottom"><b>PaymentDepositReceipt</b> (int? id)</td></tr>
<tr class="separator:abe5d4ebb87b5c0e91f2617edd686509d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a457bd52267b9065f75bbe5a82faeee02"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a457bd52267b9065f75bbe5a82faeee02">PaymentDepositReceiptToPDF</a> ()</td></tr>
<tr class="memdesc:a457bd52267b9065f75bbe5a82faeee02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate total deposit from the data passed APaymentReceiptViewModel as PaymentReceiptViewModel and pass this model data to the PaymentDepositReceiptToPDFView  <a href="#a457bd52267b9065f75bbe5a82faeee02">More...</a><br /></td></tr>
<tr class="separator:a457bd52267b9065f75bbe5a82faeee02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32041a3c590714a7ce8b3b59db82ea24"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a32041a3c590714a7ce8b3b59db82ea24">VisitRefundConfirmation</a> ()</td></tr>
<tr class="separator:a32041a3c590714a7ce8b3b59db82ea24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe04eeac8c2f30835c9661edad9d76a6"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#abe04eeac8c2f30835c9661edad9d76a6">Refund</a> ()</td></tr>
<tr class="memdesc:abe04eeac8c2f30835c9661edad9d76a6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get accessto Braintree gateway, get amount posted from the either confirm cancellation view or New view with get refund button if MyBookingCancellationRequest is not null, get payment transaction from it if InvoiceUpdated from AmendBooking or ConfirmVisit View is not null, get payment transaction from it, apply refund transaction with the transactionId found, if successful, if MyBookingCancellationRequest session is not null, save the change to the bookings, payments,invoices, paymentHistories database and save the updatedInvoice session as "updatedInvoiceCancelledBkg" to pass this to email fucntion if InvoiceUpdated from AmendBooking or ConfirmVisit view is not null, save change to payments, payemnt histories, invoices and bookings database and save TepData InvoiceUpdatedDebited to pass this to the email function. if successful in either way, retruns show view  <a href="#abe04eeac8c2f30835c9661edad9d76a6">More...</a><br /></td></tr>
<tr class="separator:abe04eeac8c2f30835c9661edad9d76a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d73d599f1b0a2ef694e4fe462df8a21"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a5d73d599f1b0a2ef694e4fe462df8a21">AddPaymentHistory</a> (int? id)</td></tr>
<tr class="memdesc:a5d73d599f1b0a2ef694e4fe462df8a21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Invoice record found from the passed id, create payment history and assign passed id as paymentHistory Invoice Id assign the found invoice's user id to this payment hiostory userid assin the found invoice's payment id to this payment history paymentId calculate total remaining amount from data from the invoice data assign the total remaining into paymentHisotry's credit amount. save the paymenthistory as "NullPaymentHisotryWithInvPayIds" sesion  <a href="#a5d73d599f1b0a2ef694e4fe462df8a21">More...</a><br /></td></tr>
<tr class="separator:a5d73d599f1b0a2ef694e4fe462df8a21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dd3ff554a0b0a99340572129dc87035"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a2dd3ff554a0b0a99340572129dc87035">AddPaymentHistory</a> ([Bind(Include=&quot;PaymentHistoryId,PaymentDateTime,PaymentType,CreditAmount,DebitAmount,TransactionId,PaymentId,InvoiceId,Id&quot;)] PaymentHistory paymentHistory)</td></tr>
<tr class="memdesc:a2dd3ff554a0b0a99340572129dc87035"><td class="mdescLeft">&#160;</td><td class="mdescRight">returns validation error if input paymentDateTime is later than now, returns validation error if both credit and debit amount is filled by mistake returns validation error if Invoiced amount is more than remaining payment amount Assign NullPaymentHistoryWithInvPayIds session's InvoiceId, bookingId and paymentId to the binded booking object as they are null at the moment save the binged booking data in payment Histories, and the payments record's appropriate attributes gets updated according to the paymenttype  <a href="#a2dd3ff554a0b0a99340572129dc87035">More...</a><br /></td></tr>
<tr class="separator:a2dd3ff554a0b0a99340572129dc87035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dbca25c3000615589dd5f52b9d0df7b"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a0dbca25c3000615589dd5f52b9d0df7b">EditPaymentHistory</a> (int id)</td></tr>
<tr class="memdesc:a0dbca25c3000615589dd5f52b9d0df7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the paymentHistory found with the passed id saves it as Session "PaymentHistoryWithIds" and pass it to the view  <a href="#a0dbca25c3000615589dd5f52b9d0df7b">More...</a><br /></td></tr>
<tr class="separator:a0dbca25c3000615589dd5f52b9d0df7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f9d68347caac3e53ab18b4afb468a24"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a5f9d68347caac3e53ab18b4afb468a24">EditPaymentHistory</a> (PaymentHistoryViewModel model)</td></tr>
<tr class="memdesc:a5f9d68347caac3e53ab18b4afb468a24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the Session data PayemntHistoryWithIds returns validation error if input paymentDateTime is later than now, returns validation error if both credit and debit amount is filled by mistake returns validation error if Invoiced amount is more than remaining payment amount Create payment history from the temppayentHistory's paymenthistory id and assing the posted PayemntHistoryViewModel model data to the created paymemnHistory save to paymentHistoyr database, and the payments record's appropriate attributes gets updated according to the paymenttype  <a href="#a5f9d68347caac3e53ab18b4afb468a24">More...</a><br /></td></tr>
<tr class="separator:a5f9d68347caac3e53ab18b4afb468a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a174254ecf6118ecb99bd0cb915ae4514"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a174254ecf6118ecb99bd0cb915ae4514">IndexPaymentHistory</a> (string startDate, string endDate)</td></tr>
<tr class="memdesc:a174254ecf6118ecb99bd0cb915ae4514"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all the paymentHistory from database if startDate and endDate is selected filters the data if payment date is btw those date pass the list of payment to the view  <a href="#a174254ecf6118ecb99bd0cb915ae4514">More...</a><br /></td></tr>
<tr class="separator:a174254ecf6118ecb99bd0cb915ae4514"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b0b28c4b3de440bbaab4d0179bf5944"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a3b0b28c4b3de440bbaab4d0179bf5944">DeletePaymentHistory</a> (int? id)</td></tr>
<tr class="memdesc:a3b0b28c4b3de440bbaab4d0179bf5944"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Payemnt History found with the passed id from database and Returns the record of PaymentHistory view that will be deleted once confirmed  <a href="#a3b0b28c4b3de440bbaab4d0179bf5944">More...</a><br /></td></tr>
<tr class="separator:a3b0b28c4b3de440bbaab4d0179bf5944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8134c914666bdbb144ad94b15d1f84e6"><td class="memItemLeft" align="right" valign="top">ActionResult&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a8134c914666bdbb144ad94b15d1f84e6">DeleteConfirmed</a> (int id)</td></tr>
<tr class="memdesc:a8134c914666bdbb144ad94b15d1f84e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get Payemnt History found with the passed id from database remove the found record from the database Change the related payments attributes. saves it to the database  <a href="#a8134c914666bdbb144ad94b15d1f84e6">More...</a><br /></td></tr>
<tr class="separator:a8134c914666bdbb144ad94b15d1f84e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Public Attributes</h2></td></tr>
<tr class="memitem:af681755383e06aa0a5df31136be68926"><td class="memItemLeft" align="right" valign="top"><a id="af681755383e06aa0a5df31136be68926"></a>
<a class="el" href="interface_alfa_accounting_1_1_controllers_1_1_i_braintree_configuration.html">IBraintreeConfiguration</a>&#160;</td><td class="memItemRight" valign="bottom"><b>config</b> = new <a class="el" href="class_alfa_accounting_1_1_controllers_1_1_braintree_configuration.html">BraintreeConfiguration</a>()</td></tr>
<tr class="separator:af681755383e06aa0a5df31136be68926"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-attribs"></a>
Static Public Attributes</h2></td></tr>
<tr class="memitem:ad5c8b969ca7fc245ddaa2c9554832188"><td class="memItemLeft" align="right" valign="top">static readonly TransactionStatus []&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#ad5c8b969ca7fc245ddaa2c9554832188">transactionSuccessStatuses</a></td></tr>
<tr class="memdesc:ad5c8b969ca7fc245ddaa2c9554832188"><td class="mdescLeft">&#160;</td><td class="mdescRight">Array to sotre transaction status sent by braintree  <a href="#ad5c8b969ca7fc245ddaa2c9554832188">More...</a><br /></td></tr>
<tr class="separator:ad5c8b969ca7fc245ddaa2c9554832188"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a913b40e51291dff52c980cf14a02343c"><td class="memItemLeft" align="right" valign="top">override void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a913b40e51291dff52c980cf14a02343c">Dispose</a> (bool disposing)</td></tr>
<tr class="memdesc:a913b40e51291dff52c980cf14a02343c"><td class="mdescLeft">&#160;</td><td class="mdescRight">dispose database related garbege after use so that entitiy frame work can work properly  <a href="#a913b40e51291dff52c980cf14a02343c">More...</a><br /></td></tr>
<tr class="separator:a913b40e51291dff52c980cf14a02343c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="properties"></a>
Properties</h2></td></tr>
<tr class="memitem:acc8f9d52de1f1e047284bab3a03de617"><td class="memItemLeft" align="right" valign="top">ApplicationUserManager&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#acc8f9d52de1f1e047284bab3a03de617">UserManager</a><code> [get, private set]</code></td></tr>
<tr class="memdesc:acc8f9d52de1f1e047284bab3a03de617"><td class="mdescLeft">&#160;</td><td class="mdescRight">allow access to the http owin context's properties  <a href="#acc8f9d52de1f1e047284bab3a03de617">More...</a><br /></td></tr>
<tr class="separator:acc8f9d52de1f1e047284bab3a03de617"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a741b6cc23c814a19db514ad186687986"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#a741b6cc23c814a19db514ad186687986">AddToCart</a> (int id)</td></tr>
<tr class="memdesc:a741b6cc23c814a19db514ad186687986"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper method to Add Booking To the Cart BookingId  <a href="#a741b6cc23c814a19db514ad186687986">More...</a><br /></td></tr>
<tr class="separator:a741b6cc23c814a19db514ad186687986"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a319bacf4cd2b5512566864c1cc6353"><td class="memItemLeft" align="right" valign="top"><a id="a9a319bacf4cd2b5512566864c1cc6353"></a>
async Task&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>SendInvoiceUrlEmailTokenAsync</b> (string userID, int invID, string subject)</td></tr>
<tr class="separator:a9a319bacf4cd2b5512566864c1cc6353"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afba945bda68b35457708ec76ba5ae3b9"><td class="memItemLeft" align="right" valign="top">async Task&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_alfa_accounting_1_1_controllers_1_1_booking_view_models_controller.html#afba945bda68b35457708ec76ba5ae3b9">SendPaymentConfirmationEmailTokenAsync</a> (string userID, string subject)</td></tr>
<tr class="memdesc:afba945bda68b35457708ec76ba5ae3b9"><td class="mdescLeft">&#160;</td><td class="mdescRight">it ignores the user id and subejct passed, userId and subject get extracted from the passed sessions always send user and admin related emails each. if NewInvoice Session data is not null booking detail and user detail is extracted from it, and new booking confirmation email send to both user and admin. if updatedInvoiceCancelledkg is not null, booking cancellation by admin. booking detail and user detail is extracted from it, and messagge get sent to both user and admin. if MyBookingCancellationRequest is not null, Booking cancellation by user. booking detail and user detail is extracted from it, and message get sent to both user and admin. if BookingUpdated is not null, Booking ajustment done by admin. booking detail and user detail is extracted from it. message sent to both user and admin. if updatedInvoice is not null, Booking amendment done by customer. booking detail and user detail is extracted from it. payment confirmation message sent to both if InvoiceUpdatedDebited is not null, Booking amendment done by customer with refund. booking detail and user detail is extracted from it. refund confirmation message sent to both  <a href="#afba945bda68b35457708ec76ba5ae3b9">More...</a><br /></td></tr>
<tr class="separator:afba945bda68b35457708ec76ba5ae3b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a9d1735d1e296cc775c51775b052af941"><td class="memItemLeft" align="right" valign="top"><a id="a9d1735d1e296cc775c51775b052af941"></a>
ApplicationUserManager&#160;</td><td class="memItemRight" valign="bottom"><b>_userManager</b></td></tr>
<tr class="separator:a9d1735d1e296cc775c51775b052af941"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a529ad925d1c229227b1404ff1097fcc8"><td class="memItemLeft" align="right" valign="top"><a id="a529ad925d1c229227b1404ff1097fcc8"></a>
ApplicationDbContext&#160;</td><td class="memItemRight" valign="bottom"><b>db</b> = new ApplicationDbContext()</td></tr>
<tr class="separator:a529ad925d1c229227b1404ff1097fcc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Mie Tanaka Version 0.0 26/05/2017 </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a5c17315b4daf73640327bfefa8b34ad7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c17315b4daf73640327bfefa8b34ad7">&#9670;&nbsp;</a></span>AddBooking() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.AddBooking </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>opens empty booking start end date input view. </p>
<dl class="section return"><dt>Returns</dt><dd>empty AddBooking View </dd></dl>

</div>
</div>
<a id="a26b7e355b83aa0974f8b3a42c3096924"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26b7e355b83aa0974f8b3a42c3096924">&#9670;&nbsp;</a></span>AddBooking() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.AddBooking </td>
          <td>(</td>
          <td class="paramtype">AddBookingViewModel&#160;</td>
          <td class="paramname"><em>model</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>post the input value and if successful save it to the database return user back to BookDates if unsuccessful returns current AddBooking view with posted data and error message </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>if value state is Returns BookDates view if not valid, returns the current AddBooking view with posted data and error message </dd></dl>

</div>
</div>
<a id="a5d73d599f1b0a2ef694e4fe462df8a21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d73d599f1b0a2ef694e4fe462df8a21">&#9670;&nbsp;</a></span>AddPaymentHistory() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.AddPaymentHistory </td>
          <td>(</td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Invoice record found from the passed id, create payment history and assign passed id as paymentHistory Invoice Id assign the found invoice's user id to this payment hiostory userid assin the found invoice's payment id to this payment history paymentId calculate total remaining amount from data from the invoice data assign the total remaining into paymentHisotry's credit amount. save the paymenthistory as "NullPaymentHisotryWithInvPayIds" sesion </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return AddPayment view with the created paymentHistorydata</dd></dl>

</div>
</div>
<a id="a2dd3ff554a0b0a99340572129dc87035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dd3ff554a0b0a99340572129dc87035">&#9670;&nbsp;</a></span>AddPaymentHistory() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.AddPaymentHistory </td>
          <td>(</td>
          <td class="paramtype">[Bind(Include = &quot;PaymentHistoryId,PaymentDateTime,PaymentType,CreditAmount,DebitAmount,TransactionId,PaymentId,InvoiceId,Id&quot;)] PaymentHistory&#160;</td>
          <td class="paramname"><em>paymentHistory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>returns validation error if input paymentDateTime is later than now, returns validation error if both credit and debit amount is filled by mistake returns validation error if Invoiced amount is more than remaining payment amount Assign NullPaymentHistoryWithInvPayIds session's InvoiceId, bookingId and paymentId to the binded booking object as they are null at the moment save the binged booking data in payment Histories, and the payments record's appropriate attributes gets updated according to the paymenttype </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">paymentHistory</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="a741b6cc23c814a19db514ad186687986"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a741b6cc23c814a19db514ad186687986">&#9670;&nbsp;</a></span>AddToCart()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void AlfaAccounting.Controllers.BookingViewModelsController.AddToCart </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Helper method to Add Booking To the Cart BookingId </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adf4a14a9683e52f9dff922c5e58bc125"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf4a14a9683e52f9dff922c5e58bc125">&#9670;&nbsp;</a></span>AdminBooking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.AdminBooking </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>startDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>endDate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allows admin view all the current bookings. allows fileter the booking data between start and endDate paramenter </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startDate</td><td></td></tr>
    <tr><td class="paramname">endDate</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>AdminBookingView</dd></dl>

</div>
</div>
<a id="a0e2390ab528b31f0e6f08cb2e1e3b4d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0e2390ab528b31f0e6f08cb2e1e3b4d6">&#9670;&nbsp;</a></span>AmendBookDates() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.AmendBookDates </td>
          <td>(</td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find Booking matches with the passed Id, Create model of a booking that both start end date is in string to work with jquery ui Find Invoice of the found Booking Pass the model to return the view </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>model data in Amend Book Dates View</dd></dl>

</div>
</div>
<a id="ac7f71cbbf29ebdd1103368248f4f70f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7f71cbbf29ebdd1103368248f4f70f8">&#9670;&nbsp;</a></span>AmendBookDates() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.AmendBookDates </td>
          <td>(</td>
          <td class="paramtype">[Bind(Include = &quot;BookingId,BookedDate,BookingStartDateTime,BookingEndDateTime,UnitPriceId,Id,InvoiceId&quot;)] AmendBookDatesDateFilterModel&#160;</td>
          <td class="paramname"><em>model</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find Booking using BookingId passed BookingOriginal TempData and assign original data to binding local variable booking Find Invoice using Invoiceid from Invoice Original TempData and assing original data to local variable selectedInv Calcuate duration of original and updated booking if both duration is the same, startDate, endDate, Item Description, subtotal, of the booking save as BookingUpdated TempData if Original duration is less than increase booking duration, updates startDate, endDate, Item Description, subtotal, of the booking also selectedInv's Recievable deposit amount get increased that get saved as InvoiceUpdated. that get passed to AmendBookingconfirmed view if Original duration is more than updated booking duration, updates the startDate, endDate, Item Description, subtotal, of the booking that get saved as BookingUpdated also selectedInv's Recievable deposit amount get reduced that get saved as InvoiceUpdated. then BookingOriginal, InvoiceOriginal, BookingUpdated, InvoiceUpdated get passed to AddBookingConfirmation View if not successful it returns the current view </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>redirect user to AmendBookingConfirmation view, if not successful returns current view</dd></dl>

</div>
</div>
<a id="afb2e1c7475bb061d45f7a810f5420d75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb2e1c7475bb061d45f7a810f5420d75">&#9670;&nbsp;</a></span>AmendBookingConfirmation() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.AmendBookingConfirmation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create VisitRefundViewModel model using data passed from tempdata BookingOriginal, BookingUpudated, Invoice Original, Invoice Updated that get passed to amend booking confirmation view </p>
<dl class="section return"><dt>Returns</dt><dd>AmendBookingConfirmation with the model data</dd></dl>

</div>
</div>
<a id="a6e5358b2fd882c060e26353c85658d87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6e5358b2fd882c060e26353c85658d87">&#9670;&nbsp;</a></span>AmendBookingConfirmation() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.AmendBookingConfirmation </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>answer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Only when additional payment amount is 0, and confirm button is clicked boolean value get passed to this action updates corresponding booking records in database </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">answer</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MyBooking View</dd></dl>

</div>
</div>
<a id="a1fa97ecedb9b4faaec9e994bfce18eb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fa97ecedb9b4faaec9e994bfce18eb3">&#9670;&nbsp;</a></span>BookDates()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.BookDates </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a BookDates View that displays calender makde of java script </p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="a34296cd23c09ae737da8519afeb608ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34296cd23c09ae737da8519afeb608ab">&#9670;&nbsp;</a></span>CancelBooking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.CancelBooking </td>
          <td>(</td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>careates MyBookingCancellation model using the routed booking id by finding it from the database if BookingStartDateTime is less than 48 hrs from now, add Â£25 of cancellation fee to the model, Saves the model as MyBookingCancellationRequest session and if cancellation fee is more than paid deposit that session is used to pass the charge fee. that model get passed to cancel booking view </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>cancel booking view filled with model data</dd></dl>

</div>
</div>
<a id="a27f68c32481b86742af2ecc237d8ec65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27f68c32481b86742af2ecc237d8ec65">&#9670;&nbsp;</a></span>ConfirmBooking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.ConfirmBooking </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create model using bookings in side booking cart saves the data inside of NewInvoice Session </p>
<dl class="section return"><dt>Returns</dt><dd>returns the view filled with the model</dd></dl>

</div>
</div>
<a id="aa3cf39dd1c42f4d3277be49ee71bda48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3cf39dd1c42f4d3277be49ee71bda48">&#9670;&nbsp;</a></span>ConfirmVisit() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.ConfirmVisit </td>
          <td>(</td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get booking using the passed id saves it as a tempdata BookingOriginal Get invoice using the BookingId of the booking saves it as a tempdata InvoiceOriginal retrn it to the view </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Confirm Booking</dd></dl>

</div>
</div>
<a id="a30ebb6edf4dab2b9d02a3fbac9570bae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30ebb6edf4dab2b9d02a3fbac9570bae">&#9670;&nbsp;</a></span>ConfirmVisit() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;ActionResult&gt; AlfaAccounting.Controllers.BookingViewModelsController.ConfirmVisit </td>
          <td>(</td>
          <td class="paramtype">[Bind(Include = &quot;BookingId,BookedDate,BookingStartDateTime,BookingEndDateTime,BookingStatus,BookingAdjustmentHrs,ItemDescription,Subtotal,BookingDeposit,BookingCancellationFee,UnitPriceId,Id,InvoiceId&quot;)] Booking&#160;</td>
          <td class="paramname"><em>booking</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get posted booking data,depending on the booking status chosen manipulate data and redirect to apprprirate view if booking status is unchanged or curtailed/extended without adjustment hrs input returns current view with error if booking status is visited, startDate, endDate, and item description updated and the booking saved to database Returns AdminBooking View if booking status is extended, subtotal, deposit cancellationfee value, startDate, endDate, and item description </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">booking</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="a6aab0900b3c5209a8674b3b909d7532b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6aab0900b3c5209a8674b3b909d7532b">&#9670;&nbsp;</a></span>Create()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.Create </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open Gateway to the Braintree and make payment of the passed amount and submit for the settlement when successful and if NewInvoice Session data is not null saves the new booking to the Boooking Invoice, Payemnt and Payment History databases and clear shopping cart item. if tempInvoiceDetailVeiwmodel TempData is not null saves the remainging payment amount related update to the Invoice, Booking, Payemnt and Payment History databases if MyBookingCancelationRequrest Session data is not null, cancelation related payment amount updated on booking, invoice, payment and paymentHisotry database if BookingUpdated and InvoiceUpdated TempData that is from amdend booking acion is not null, appropriate extra depsit charge or cancellation fee or reduced hrs deposit refund related change get amended to Booking, invoice, payemt and paymenthistory database. </p>
<dl class="section return"><dt>Returns</dt><dd>returns show view</dd></dl>

</div>
</div>
<a id="a5264795f04c49fa720e00514b644b57d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5264795f04c49fa720e00514b644b57d">&#9670;&nbsp;</a></span>Dashboard()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.Dashboard </td>
          <td>(</td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>year</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>with user specified year parameter, calcuates and displays the graph data also calucate and display user visits notification, admin visit notification and visit status update notification </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">year</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Graph and notification in View</dd></dl>
<p>includesource&gt; /includesource&gt; </p>

</div>
</div>
<a id="aab2da8319a9b49c4dd060b669e230552"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab2da8319a9b49c4dd060b669e230552">&#9670;&nbsp;</a></span>DashBoardUser()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.DashBoardUser </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate and display count of invoice and total amount of unpaid invoice sum </p>
<dl class="section return"><dt>Returns</dt><dd>View with notification data</dd></dl>

</div>
</div>
<a id="a8134c914666bdbb144ad94b15d1f84e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8134c914666bdbb144ad94b15d1f84e6">&#9670;&nbsp;</a></span>DeleteConfirmed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.DeleteConfirmed </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Payemnt History found with the passed id from database remove the found record from the database Change the related payments attributes. saves it to the database </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns IndexPaymentHisotry</dd></dl>

</div>
</div>
<a id="a3b0b28c4b3de440bbaab4d0179bf5944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b0b28c4b3de440bbaab4d0179bf5944">&#9670;&nbsp;</a></span>DeletePaymentHistory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.DeletePaymentHistory </td>
          <td>(</td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Payemnt History found with the passed id from database and Returns the record of PaymentHistory view that will be deleted once confirmed </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Retrun DeletePaymentHistory with paymentHistory data</dd></dl>

</div>
</div>
<a id="a913b40e51291dff52c980cf14a02343c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a913b40e51291dff52c980cf14a02343c">&#9670;&nbsp;</a></span>Dispose()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">override void AlfaAccounting.Controllers.BookingViewModelsController.Dispose </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>disposing</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>dispose database related garbege after use so that entitiy frame work can work properly </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">disposing</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a0dbca25c3000615589dd5f52b9d0df7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0dbca25c3000615589dd5f52b9d0df7b">&#9670;&nbsp;</a></span>EditPaymentHistory() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.EditPaymentHistory </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the paymentHistory found with the passed id saves it as Session "PaymentHistoryWithIds" and pass it to the view </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EditPaymentHistory view with paymenthistory data</dd></dl>

</div>
</div>
<a id="a5f9d68347caac3e53ab18b4afb468a24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f9d68347caac3e53ab18b4afb468a24">&#9670;&nbsp;</a></span>EditPaymentHistory() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.EditPaymentHistory </td>
          <td>(</td>
          <td class="paramtype">PaymentHistoryViewModel&#160;</td>
          <td class="paramname"><em>model</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the Session data PayemntHistoryWithIds returns validation error if input paymentDateTime is later than now, returns validation error if both credit and debit amount is filled by mistake returns validation error if Invoiced amount is more than remaining payment amount Create payment history from the temppayentHistory's paymenthistory id and assing the posted PayemntHistoryViewModel model data to the created paymemnHistory save to paymentHistoyr database, and the payments record's appropriate attributes gets updated according to the paymenttype </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">model</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<a id="a174254ecf6118ecb99bd0cb915ae4514"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a174254ecf6118ecb99bd0cb915ae4514">&#9670;&nbsp;</a></span>IndexPaymentHistory()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.IndexPaymentHistory </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>startDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>endDate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets all the paymentHistory from database if startDate and endDate is selected filters the data if payment date is btw those date pass the list of payment to the view </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startDate</td><td></td></tr>
    <tr><td class="paramname">endDate</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns PaymentHistoryView with list of payment history data</dd></dl>

</div>
</div>
<a id="a041402af1bece6737df3fb799dc16550"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a041402af1bece6737df3fb799dc16550">&#9670;&nbsp;</a></span>InvoiceDetail()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.InvoiceDetail </td>
          <td>(</td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets Invoice Detail data using the passed id and returns it to the view </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>InvoiceDetail view with InvoiceDetailViewModel model data </dd></dl>

</div>
</div>
<a id="af36acd06396149c082418a6668673052"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af36acd06396149c082418a6668673052">&#9670;&nbsp;</a></span>InvoiceDetailToPDF()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.InvoiceDetailToPDF </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert passed model into a pdf view </p>
<dl class="section return"><dt>Returns</dt><dd>InvoicedDetailToPDF view with passed model</dd></dl>

</div>
</div>
<a id="a346f77626590a070d12e96a5d69a837e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a346f77626590a070d12e96a5d69a837e">&#9670;&nbsp;</a></span>InvoiceIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.InvoiceIndex </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>startDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>endDate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the list of Bookings with Invoice and payment amount by user id if user is logged in, if admin/staff is logged in all user's invoice data get returned and set those data in to InvoiceIndexViewModel model list if startDate and endDate parameter passed, allows user fileter the model data by BookingStartDateTime allows user export in csv, in pdf of the filtered or unfiletered model data </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startDate</td><td></td></tr>
    <tr><td class="paramname">endDate</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>InvoiceIndex View with InvoiceIndexModelView model list data</dd></dl>

</div>
</div>
<a id="a361d39aedee7dbfdacfaae1c1a9c67cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a361d39aedee7dbfdacfaae1c1a9c67cc">&#9670;&nbsp;</a></span>MyBooking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.MyBooking </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>startDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>endDate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Bookings and create query with Invoice and payment amount and set those data in to MyBookingsViewModelBase model list if startDate and endDate parameter passed, allows user fileter the data by BookingStartDateTime allows user export in csv, in pdf of the filtered or unfiletered data </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startDate</td><td></td></tr>
    <tr><td class="paramname">endDate</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>MyBooking View with MyBookingsViewModelBase model data </dd></dl>

</div>
</div>
<a id="ae5344a979e68c8b3714902ad3bc2f98c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5344a979e68c8b3714902ad3bc2f98c">&#9670;&nbsp;</a></span>New()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.New </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get client token to access braintree gateway, if newInvoice session data is not null, pass pay newInvoiceSeccion's recievable deposit amount as pay amount to pay newly booked deposit if MyBookingCancellationRequest session data is not null, if cancellation fee is more than 0 and paymentType is Deposit or DepositCancelled, pay amount is booking cancellation fee to pay cancelation fee. if booking cancellation fee is more than 0, cancellation fee is more than Booking deposit, deposit becomes pay amount to pay cancelation fee. if booking status is cancelled but booking deposit is more than 0, refund amount is original cancelled deposit amount to refund deposit. ** only in this case return New view with Get Refund Post form. if tempInvoiceDetail is not null pay amount becomes tempInvoiceDetail.receibableRemainingAmount - tempInvoiceDetail.PayableAmount to pay remaining booking fee and saves tempInvoiceDatail as TempData if invoiceUpdated or bookingUpdated is not null, amount becomes posted amount from the AmendBookingConfirmation for user to pay extra hrs deposit charge </p>
<dl class="section return"><dt>Returns</dt><dd>Returns New View with Pay or New view with refund amount, only when cancellation refund data passsed</dd></dl>

</div>
</div>
<a id="a457bd52267b9065f75bbe5a82faeee02"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a457bd52267b9065f75bbe5a82faeee02">&#9670;&nbsp;</a></span>PaymentDepositReceiptToPDF()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.PaymentDepositReceiptToPDF </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate total deposit from the data passed APaymentReceiptViewModel as PaymentReceiptViewModel and pass this model data to the PaymentDepositReceiptToPDFView </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PaymentDepositReceiptToPDF view with passed model data</dd></dl>

</div>
</div>
<a id="a0ed146c62729d4e05b0bc7b532319ed8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ed146c62729d4e05b0bc7b532319ed8">&#9670;&nbsp;</a></span>PaymentIndex()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.PaymentIndex </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>startDate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>endDate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the Bookings and create query with invoice and payment amount by user id if user is logged in, if admin/staff is logged in all user's payment query data get returned and set above data into PaymentReceiptViewModel model list if startDate and endDate parameter passed, allows user fileter the data by the BookingStartDateTime allows user export in csv, in pdf of the filtered or unfiletered data </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">startDate</td><td></td></tr>
    <tr><td class="paramname">endDate</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PaymentIndexView with the PaymentIndexView model list data</dd></dl>

</div>
</div>
<a id="ac228b95707fb10fe6aca1e4cacc2be6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac228b95707fb10fe6aca1e4cacc2be6d">&#9670;&nbsp;</a></span>PaymentReceipt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.PaymentReceipt </td>
          <td>(</td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get Invoice record found by the passed id and create query with payemnt and Invoice data set PaymentReceiptViewModel model with the query data </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PaymentReceipt View with the PaymentReceiptViewmodel model</dd></dl>

</div>
</div>
<a id="af89a68f628793df0d1b8b3167686b33e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af89a68f628793df0d1b8b3167686b33e">&#9670;&nbsp;</a></span>PaymentReceiptToPDF()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.PaymentReceiptToPDF </td>
          <td>(</td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate total credit, debt and paid from the data passed APaymentReceipt as PaymentReceiptViewModel and pass this model data to the PaymentReceiptToPDFView </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PaymentReceiptToPDF view with passed model data</dd></dl>
<p>summary&gt; Get Invoice record found by the passed id and create query with payemnt and Invoice data set PaymentReceiptViewModel model with the query data </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>PaymentDepositReceipt View with the PaymentReceiptViewmodel model</dd></dl>

</div>
</div>
<a id="abe04eeac8c2f30835c9661edad9d76a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe04eeac8c2f30835c9661edad9d76a6">&#9670;&nbsp;</a></span>Refund()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.Refund </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get accessto Braintree gateway, get amount posted from the either confirm cancellation view or New view with get refund button if MyBookingCancellationRequest is not null, get payment transaction from it if InvoiceUpdated from AmendBooking or ConfirmVisit View is not null, get payment transaction from it, apply refund transaction with the transactionId found, if successful, if MyBookingCancellationRequest session is not null, save the change to the bookings, payments,invoices, paymentHistories database and save the updatedInvoice session as "updatedInvoiceCancelledBkg" to pass this to email fucntion if InvoiceUpdated from AmendBooking or ConfirmVisit view is not null, save change to payments, payemnt histories, invoices and bookings database and save TepData InvoiceUpdatedDebited to pass this to the email function. if successful in either way, retruns show view </p>
<dl class="section return"><dt>Returns</dt><dd>BookingViewModels/Show View</dd></dl>

</div>
</div>
<a id="a560b40cc15d83dc780c485d678e3e68c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a560b40cc15d83dc780c485d678e3e68c">&#9670;&nbsp;</a></span>SendAdminTodaysVisitText()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;ActionResult&gt; AlfaAccounting.Controllers.BookingViewModelsController.SendAdminTodaysVisitText </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>On Click Ation to send todays visit's users detail </p>
<dl class="section return"><dt>Returns</dt><dd>DashBoard View </dd></dl>

</div>
</div>
<a id="a2c4f4b56be6badae27c572180cb3d8fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2c4f4b56be6badae27c572180cb3d8fd">&#9670;&nbsp;</a></span>SendApptConfirmation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.SendApptConfirmation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get BookingStateDateTime is less tha 24hrs from now. and pass that list to the View </p>
<dl class="section return"><dt>Returns</dt><dd>Returns SendApptConfirmation View</dd></dl>

</div>
</div>
<a id="a047e63d34c2b64f178b55351fa544e77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a047e63d34c2b64f178b55351fa544e77">&#9670;&nbsp;</a></span>SendApptConfirmationText()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;ActionResult&gt; AlfaAccounting.Controllers.BookingViewModelsController.SendApptConfirmationText </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get BookingStateDateTime is less tha 24hrs from now and send confirmation text to all users </p>
<dl class="section return"><dt>Returns</dt><dd>null</dd></dl>

</div>
</div>
<a id="afba945bda68b35457708ec76ba5ae3b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afba945bda68b35457708ec76ba5ae3b9">&#9670;&nbsp;</a></span>SendPaymentConfirmationEmailTokenAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;string&gt; AlfaAccounting.Controllers.BookingViewModelsController.SendPaymentConfirmationEmailTokenAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>userID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>subject</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>it ignores the user id and subejct passed, userId and subject get extracted from the passed sessions always send user and admin related emails each. if NewInvoice Session data is not null booking detail and user detail is extracted from it, and new booking confirmation email send to both user and admin. if updatedInvoiceCancelledkg is not null, booking cancellation by admin. booking detail and user detail is extracted from it, and messagge get sent to both user and admin. if MyBookingCancellationRequest is not null, Booking cancellation by user. booking detail and user detail is extracted from it, and message get sent to both user and admin. if BookingUpdated is not null, Booking ajustment done by admin. booking detail and user detail is extracted from it. message sent to both user and admin. if updatedInvoice is not null, Booking amendment done by customer. booking detail and user detail is extracted from it. payment confirmation message sent to both if InvoiceUpdatedDebited is not null, Booking amendment done by customer with refund. booking detail and user detail is extracted from it. refund confirmation message sent to both </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">userID</td><td></td></tr>
    <tr><td class="paramname">subject</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>null</dd></dl>

</div>
</div>
<a id="aa3606d7cc1ee17ff8da3baaf866ea68b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3606d7cc1ee17ff8da3baaf866ea68b">&#9670;&nbsp;</a></span>Show()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;ActionResult&gt; AlfaAccounting.Controllers.BookingViewModelsController.Show </td>
          <td>(</td>
          <td class="paramtype">String&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Gets the transaction id and find transaction status info and displays Calls for the payment confirmation email function before return view </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Show view</dd></dl>

</div>
</div>
<a id="a32041a3c590714a7ce8b3b59db82ea24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32041a3c590714a7ce8b3b59db82ea24">&#9670;&nbsp;</a></span>VisitRefundConfirmation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ActionResult AlfaAccounting.Controllers.BookingViewModelsController.VisitRefundConfirmation </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p></p>
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ad5c8b969ca7fc245ddaa2c9554832188"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5c8b969ca7fc245ddaa2c9554832188">&#9670;&nbsp;</a></span>transactionSuccessStatuses</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly TransactionStatus [] AlfaAccounting.Controllers.BookingViewModelsController.transactionSuccessStatuses</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">                                                                                    TransactionStatus.AUTHORIZED,</div><div class="line">                                                                                    TransactionStatus.AUTHORIZING,</div><div class="line">                                                                             TransactionStatus.SETTLED,</div><div class="line">                                                                                    TransactionStatus.SETTLING,</div><div class="line">                                                                                    TransactionStatus.SETTLEMENT_CONFIRMED,</div><div class="line">                                                                                    TransactionStatus.SETTLEMENT_PENDING,</div><div class="line">                                                                                    TransactionStatus.SUBMITTED_FOR_SETTLEMENT</div><div class="line">                                                                                }</div></div><!-- fragment -->
<p>Array to sotre transaction status sent by braintree </p>

</div>
</div>
<h2 class="groupheader">Property Documentation</h2>
<a id="acc8f9d52de1f1e047284bab3a03de617"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc8f9d52de1f1e047284bab3a03de617">&#9670;&nbsp;</a></span>UserManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ApplicationUserManager AlfaAccounting.Controllers.BookingViewModelsController.UserManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">get</span><span class="mlabel">private set</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>allow access to the http owin context's properties </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>C:/Users/Me/Documents/Visual Studio 2015/Projects/AlfaAccounting/AlfaAccounting/Controllers/BookingViewModelsController.cs</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
